<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="jQuery.timeago.js"></script>
    <link rel="stylesheet" type="text/css" href="twits.css">
  </head>
  <body>
    

    <script>
  $(document).ready(function(){

        
      var twittle = function(user){
        if(user)
          {var index = streams.users[user].length-1}
        else
          {var index = streams.home.length - 1;}

        
        while(index >= 0){
        if(user)
          {var tweet = streams.users[user][index];}
        else
          {var tweet = streams.home[index];}        

          var $tweet = $(
              "<div id='singleTweet' class='singleTweet'>" +
                '<div id="user" class="user"><a href="#" class='+tweet.user +'>' +
                  '@' + tweet.user +
                '</a></div>' +
                '<div id="message">' +
                    tweet.message.toUpperCase() +
                '</div>' +
                '<div id="time">' +
                   '-' + jQuery.timeago(tweet.created_at) +
                "</div>" +
              "</div>");
          $tweet.hide().appendTo('#allTweets').fadeIn('fast');
          index -= 1;
        }
      };

      twittle();


     $('#moreTweets').on('click', function(d){
          d.preventDefault()
          $('.singleTweet').remove();
          twittle();
        });

     
        $('#allTweets').on('click', 'a', function(d){
          d.preventDefault();
          $('.singleTweet').remove();
          $('.feedBaby').remove();
          var user = this.getAttribute('class');
          twittle(user);
                    $('<div>'+user+'</div>').appendTo('.feedBaby');

        });

      }); 
    </script>
    
    
    <h1 id="title">Welcome<br/>to <b>TWITTLER</b></h1>
    <button><div id="moreTweets"><span>GET MORE <b>TWITTLES!</b></span></div></button>
    <div class="feedOwner">Theoretically, this will be where I put the owner or the feed you're currently viewing<div class="feedBaby"></div></div>
    
    <div id="tweetHolder">
      <h3 id="feedHeader">TWITTLE FEED</h3>
      <div id="allTweets">
      </div>
    </div>
    

    

  </body>
</html>
